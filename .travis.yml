language: rust
rust:
  - nightly-2017-09-04

services:
  - postgresql

before_install:
  # SCSS compiler
  - gem install sass

  # Install diesel_cli if not cached
  - hash diesel 2>/dev/null || cargo install -f diesel_cli

before_script:
  - cp ci/.env.travis .env
  - diesel setup

script:
  - ci/run.sh

cache: cargo

sudo: false

git:
    depth: 1
